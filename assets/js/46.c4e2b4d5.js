(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{232:function(s,a,e){"use strict";e.r(a);var t=e(0),n=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"gtid-复制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gtid-复制","aria-hidden":"true"}},[s._v("#")]),s._v(" GTID 复制")]),s._v(" "),e("h2",{attrs:{id:"主配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 主配置")]),s._v(" "),e("ul",[e("li",[s._v("开启binlog")]),s._v(" "),e("li",[s._v("配置SERVER_ID")]),s._v(" "),e("li",[s._v("创建授权账号")]),s._v(" "),e("li",[s._v("查看主信息")])]),s._v(" "),e("h3",{attrs:{id:"master-开启binlog"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#master-开启binlog","aria-hidden":"true"}},[s._v("#")]),s._v(" master - 开启binlog")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("show variables like '%log_bin%'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim /etc/my.cnf\n\n[mysqld]\nlog-bin=mysql-bin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"master-开启gtid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#master-开启gtid","aria-hidden":"true"}},[s._v("#")]),s._v(" master - 开启GTID")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("show variables like '%log_bin%'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim /etc/my.cnf\n\n[mysqld]\ngtid-mode=on\nenforce-gtid-consistency=on\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"master-创建授权账号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#master-创建授权账号","aria-hidden":"true"}},[s._v("#")]),s._v(" master - 创建授权账号")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("grant replication slave on *.* to 'slave'@'xxx.xxx.xxx.%' identified by '@#f1d54mi';\nFLUSH PRIVILEGES;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"从配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 从配置")]),s._v(" "),e("h3",{attrs:{id:"配置主信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置主信息","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置主信息")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("stop slave\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(">mysql -uroot -p\n\nchange master to\nmaster_host='xxx.xxx.xxx.xxx',\nmaster_user='slave',\nmaster_password='#f1d54mi',\nmaster_auto_position=1,\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("show slave status\\G\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("start slave\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}],!1,null,null,null);n.options.__file="gtid.md";a.default=n.exports}}]);