(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{245:function(t,s,e){"use strict";e.r(s);var r=e(0),a=Object(r.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("p",[e("a",{attrs:{href:"http://php.net/manual/zh/errorfunc.configuration.php#ini.display-errors",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHP官方手册"),e("OutboundLink")],1)]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),e("p",[t._v("strace可以用来查看系统调用的执行，使用strace php test.php，或者strace -p 进程ID。strace就可以帮助你透过现象看本质，掌握程序执行的过程。")]),t._v(" "),t._m(11),t._v(" "),e("p",[t._v("phptrace 是一个追踪（trace）PHP执行流程的工具，你如果用过strace的话，则可能很容易想到phptrace到底实现了什么样的功能。其实，phptrace是类strace的一个实现，不同的是，strace用来追踪系统调用，而phptrace用来追踪PHP函数调用。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzAxNzMwOTQ0NA%3D%3D&mid=2653354782&idx=2&sn=9b63f6655230bec82d37a97968a55926&chksm=8035d175b74258632c3fecb6f18ed4f961afb5cf69bd2b6f547b44a3f73d9c98bf0f27720a99",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHP Trace"),e("OutboundLink")],1)]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调试","aria-hidden":"true"}},[this._v("#")]),this._v(" 调试")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("说明")]),this._v(" "),s("p",[this._v("一个程序在运行中，会出现很多错误")]),this._v(" "),s("p",[this._v("没有按预期运行")]),this._v(" "),s("p",[this._v("那我们应该用方式来排查")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"错误信息-日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误信息-日志","aria-hidden":"true"}},[this._v("#")]),this._v(" 错误信息 / 日志")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("通常我们可以在PHP.ini中设置")]),this._v(" "),s("li",[this._v("或者在代码中，ini_set设置")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("log_errors")]),this._v(" "),s("ul",[s("li",[this._v("错误日志 "),s("code",[this._v("log_errors")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("error_reporting")]),this._v(" "),s("p",[this._v("error_reporting 设置错误报告的级别。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("display_errors / display_startup_errors")]),this._v(" "),s("p",[this._v("display_errors 该选项设置是否将错误信息作为输出的一部分显示到屏幕，或者对用户隐藏而不显示。")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-php line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("error_reporting")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E_ALL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ini_set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'display_errors'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'On'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ini_set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'log_errors'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'On'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"断点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#断点","aria-hidden":"true"}},[this._v("#")]),this._v(" 断点")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("var_dump / die 惯用多简单粗暴有效多解决问题方法。")]),this._v(" "),s("li",[this._v("xdebug + 浏览器 + IDE")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"strace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#strace","aria-hidden":"true"}},[this._v("#")]),this._v(" Strace")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"trace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trace","aria-hidden":"true"}},[this._v("#")]),this._v(" Trace")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"tcpdump"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tcpdump","aria-hidden":"true"}},[this._v("#")]),this._v(" Tcpdump")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("tcpdump可以抓到网卡的数据通信过程，甚至数据内容也可以抓到。")])]),this._v(" "),s("li",[s("p",[this._v("使用tcpdump可以看到网络通信过程是什么样的，如何时发起了TCP SYN3次握手，何时发送FIN包，何时发送RST包。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"查看函数调用的指标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看函数调用的指标","aria-hidden":"true"}},[this._v("#")]),this._v(" 查看函数调用的指标")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("可以使用第三方工具来检查每个API运行的耗时、成功率、内存、IO等情况")])]),this._v(" "),s("li",[s("p",[this._v("这样也更透明的去理解")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"gdb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gdb","aria-hidden":"true"}},[this._v("#")]),this._v(" gdb")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("gdb是C/C++调试程序的利器，需要具备一定C/C++功底的程序员才会能熟练使用gdb。")])]),this._v(" "),s("li",[s("p",[this._v("上面说的strace无法跟踪php程序CPU100%，而gdb是可以跟踪的。另外gdb也可以解决php程序core dump的问题。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"php内核和扩展源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php内核和扩展源码","aria-hidden":"true"}},[this._v("#")]),this._v(" PHP内核和扩展源码")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("配合gdb工具和对PHP源码的熟悉，可以查看opcode的信息，execute_data的内存，全局变量的状态等。")])])}],!1,null,null,null);a.options.__file="debug.md";s.default=a.exports}}]);