(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{168:function(t,a,e){t.exports=e.p+"assets/img/message.7b13ee00.png"},169:function(t,a,e){t.exports=e.p+"assets/img/tcp.901c36fc.png"},197:function(t,a,e){"use strict";e.r(a);var r=[function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"content"},[r("h1",{attrs:{id:"tcp"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tcp","aria-hidden":"true"}},[t._v("#")]),t._v(" TCP")]),t._v(" "),r("h2",{attrs:{id:"三次握手"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三次握手","aria-hidden":"true"}},[t._v("#")]),t._v(" 三次握手")]),t._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[t._v("名词")]),t._v(" "),r("p",[t._v("在TCP/IP协议中,TCP协议提供可靠的连接服务,采用三次握手建立一个连接.")])]),t._v(" "),r("h3",{attrs:{id:"报文格式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#报文格式","aria-hidden":"true"}},[t._v("#")]),t._v(" 报文格式")]),t._v(" "),r("h4",{attrs:{id:"图例："}},[r("a",{staticClass:"header-anchor",attrs:{href:"#图例：","aria-hidden":"true"}},[t._v("#")]),t._v(" 图例：")]),t._v(" "),r("img",{staticStyle:{width:"500px"},attrs:{src:e(168)}}),t._v(" "),r("h4",{attrs:{id:"序号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#序号","aria-hidden":"true"}},[t._v("#")]),t._v(" 序号")]),t._v(" "),r("ul",[r("li",[t._v("Seq")])]),t._v(" "),r("p",[t._v("用来标识从TCP源端向目的端发送的字节流，发起方发送数据时对此进行标记。")]),t._v(" "),r("h4",{attrs:{id:"确认序号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#确认序号","aria-hidden":"true"}},[t._v("#")]),t._v(" 确认序号")]),t._v(" "),r("ul",[r("li",[t._v("Ack序号")])]),t._v(" "),r("p",[t._v("占32位，只有ACK标志位为1时，确认序号字段才有效，Ack=Seq+1。")]),t._v(" "),r("h4",{attrs:{id:"标志位"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#标志位","aria-hidden":"true"}},[t._v("#")]),t._v(" 标志位")]),t._v(" "),r("ul",[r("li",[t._v("URG： 紧急指针（urgent pointer）有效。")]),t._v(" "),r("li",[t._v("ACK： 确认序号有效。")]),t._v(" "),r("li",[t._v("PSH： 接收方应该尽快将这个报文交给应用层。")]),t._v(" "),r("li",[t._v("RST： 重置连接。")]),t._v(" "),r("li",[t._v("SYN： 发起一个新连接。")]),t._v(" "),r("li",[t._v("FIN： 释放一个连接。")])]),t._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[t._v("需要注意的是：")]),t._v(" "),r("ul",[r("li",[t._v("不要将确认序号Ack与标志位中的ACK搞混了。")]),t._v(" "),r("li",[t._v("确认方Ack=发起方Req+1，两端配对。")])])]),t._v(" "),r("h4",{attrs:{id:"服务状态标志"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#服务状态标志","aria-hidden":"true"}},[t._v("#")]),t._v(" 服务状态标志")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("ESTABLISHED")]),t._v(" "),r("p",[t._v("建立了")])]),t._v(" "),r("li",[r("p",[t._v("SYN_RECE")]),t._v(" "),r("p",[t._v("Server 建立一个新的连接，等待接受")])]),t._v(" "),r("li",[r("p",[t._v("SYN_SENT")]),t._v(" "),r("p",[t._v("Client 建立一个新的连接，等待发送")])])]),t._v(" "),r("h3",{attrs:{id:"握手过程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#握手过程","aria-hidden":"true"}},[t._v("#")]),t._v(" 握手过程")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("图例：\n"),r("img",{attrs:{src:e(169)}})])]),t._v(" "),r("li",[r("p",[t._v("解释：")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("第一次握手：Client将标志位SYN置为1，随机产生一个值seq=J，并将该数据包发送给Server，Client进入SYN_SENT状态，等待Server确认。")])]),t._v(" "),r("li",[r("p",[t._v("第二次握手：Server收到数据包后由标志位SYN=1知道Client请求建立连接，Server将标志位SYN和ACK都置为1，ack=J+1，随机产生一个值seq=K，并将该数据包发送给Client以确认连接请求，Server进入SYN_RCVD状态。")])]),t._v(" "),r("li",[r("p",[t._v("第三次握手：Client收到确认后，检查ack是否为J+1，ACK是否为1，如果正确则将标志位ACK置为1，ack=K+1，并将该数据包发送给Server，Server检查ack是否为K+1，ACK是否为1，如果正确则连接建立成功，Client和Server进入ESTABLISHED状态，完成三次握手，随后Client与Server之间可以开始传输数据了。")])])])])]),t._v(" "),r("h2",{attrs:{id:"syn攻击"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#syn攻击","aria-hidden":"true"}},[t._v("#")]),t._v(" SYN攻击")]),t._v(" "),r("h2",{attrs:{id:"四次挥手"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四次挥手","aria-hidden":"true"}},[t._v("#")]),t._v(" 四次挥手")])])}],s=e(0),i=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},r,!1,null,null,null);i.options.__file="tcp.md";a.default=i.exports}}]);