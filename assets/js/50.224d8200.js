(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{225:function(a,e,s){"use strict";s.r(e);var t=s(0),c=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"php7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php7","aria-hidden":"true"}},[a._v("#")]),a._v(" PHP7")]),a._v(" "),s("h2",{attrs:{id:"php7快在哪里"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php7快在哪里","aria-hidden":"true"}},[a._v("#")]),a._v(" PHP7快在哪里")]),a._v(" "),s("ul",[s("li",[a._v("减少内存分配次数")]),a._v(" "),s("li",[a._v("多使用栈内存，")]),a._v(" "),s("li",[a._v("缓存数组hash值")]),a._v(" "),s("li",[a._v("字符串解析成参数改为宏展开")]),a._v(" "),s("li",[a._v("使用大块连续内存代替小块碎片内存等等。")])]),a._v(" "),s("h2",{attrs:{id:"性能提升"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能提升","aria-hidden":"true"}},[a._v("#")]),a._v(" 性能提升")]),a._v(" "),s("h3",{attrs:{id:"opcache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#opcache","aria-hidden":"true"}},[a._v("#")]),a._v(" Opcache")]),a._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[a._v("Opcache")]),a._v(" "),s("p",[a._v("通过将 PHP 脚本预编译的字节码存储到共享内存中来提升 PHP 的性能， 存储预编译字节码的好处就是 省去了每次加载和解析 PHP 脚本的开销")])]),a._v(" "),s("ul",[s("li",[a._v("启用Opcache非常简单,在php.ini配置文件中加入:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('zend_extension=opcache.so\nopcache.enable=1\nopcache.enable_cli=1"\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"gcc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gcc","aria-hidden":"true"}},[a._v("#")]),a._v(" GCC")]),a._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[a._v("GCC")]),a._v(" "),s("p",[a._v("gcc是一个编译器,")])]),a._v(" "),s("ul",[s("li",[a._v("推荐GCC 4.8以上, 因为只有GCC 4.8以上PHP才会开启Global Register for opline and execute_data支持, 这个会带来5%左右的性能提升")])]),a._v(" "),s("h3",{attrs:{id:"hugepage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hugepage","aria-hidden":"true"}},[a._v("#")]),a._v(" HugePage")]),a._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[a._v("HugePage")]),a._v(" "),s("p",[a._v("HugePage linux的大页内存")])]),a._v(" "),s("ul",[s("li",[a._v("CentOS 6.5为例, 分配512预留的大页内存")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sysctl vm.nr_hugepages=512\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("php 开启 huge_code_pages")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(" opcache.huge_code_pages=1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"opcache-file-cache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#opcache-file-cache","aria-hidden":"true"}},[a._v("#")]),a._v(" Opcache file cache")]),a._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[a._v("Opcache file cache")]),a._v(" "),s("p",[a._v("开启Opcache File Cache(实验性), 通过开启这个, 我们可以让Opcache把opcode缓存缓存到外部文件中, 对于一些脚本, 会有很明显的性能提升.")])]),a._v(" "),s("ul",[s("li",[a._v("php.ini开启")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("opcache.file_cache=/tmp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("这样PHP就会在/tmp目录下Cache一些Opcode的二进制导出文件, 可以跨PHP生命周期存在.")])])])}],!1,null,null,null);c.options.__file="php7.md";e.default=c.exports}}]);